/*
 * 안녕하세요 코드팩토리입니다. http://codefactory.kr, [프로그램 개발문의] master@codefactory.kr
 * 이 프로그램은 아무런 제약없이 복사/수정/재배포 하셔도 되며 주석을 지우셔도 됩니다.
 * 감사합니다.
 */
(function(a,b,c,d){function k(b){if(!b.data.options.verticalScroll){b.preventDefault()}if(a(this).find("ul.cf-slide-panel-ul").is(":animated")){return}var c=a(this).find("ul.cf-slide-panel-ul"),d=parseInt(c.css("marginLeft"));c.css("marginLeft",d-(i-(b.originalEvent&&b.originalEvent.touches?b.originalEvent.touches[0].pageX:b.pageX)));i=b.originalEvent&&b.originalEvent.touches?b.originalEvent.touches[0].pageX:b.pageX}function j(b,c){this.element=b;this.options=a.extend({},f,c);this._defaults=f;this._name=e;this.init()}var e="cfSlidePanel",f={speed:400,touchMoveLength:100,verticalScroll:false,getIndex:null,prevBtn:".prev",nextBtn:".next"};var g=0,h=0,i=0;j.prototype.init=function(){var c=a(this.element),e=this.options,f=c.find(".panel"),j=f.length,l=c.width();f.hide();a("<ul />",{"class":"cf-slide-panel-ul"}).css({listStyle:"none",margin:0,padding:0,width:l*j}).appendTo(this.element);f.each(function(b){a("<li />",{"class":"cf-slide-panel-item",html:this,"data-index":b}).css({"float":"left",width:l}).appendTo("ul.cf-slide-panel-ul")});f.show();sessionStorage.cfSlidePanelCurrentIndex=d;c.data("plugin_cfSlider","");c.cfSlider({speed:e.speed,container:".cf-slide-panel-ul",item:".cf-slide-panel-item",prevEventType:"cf-slide-panel-prev",nextEventType:"cf-slide-panel-next",prevBtn:e.prevBtn,nextBtn:e.nextBtn,callback:function(b){sessionStorage.cfSlidePanelCurrentIndex=a(b).data("index");if(typeof e.getIndex==="function"){e.getIndex(a(b).data("index"))}}}).each(function(){if(sessionStorage.cfSlidePanelCurrentIndex!=d){a(".cf-slide-panel-ul").css({marginLeft:-(l*(parseInt(sessionStorage.cfSlidePanelCurrentIndex)+1))+"px"})}var b=c.data("plugin_cfSlider"),f=c.find(".cf-slide-panel-ul");c.unbind(".cfSlidePanel");c.bind("mousedown.cfSlidePanel touchstart.cfSlidePanel",function(a){if(!e.verticalScroll){a.preventDefault()}if(f.is(":animated")){return}g=parseInt(f.css("marginLeft"));h=i=a.originalEvent&&a.originalEvent.touches?a.originalEvent.touches[0].pageX:a.pageX;c.bind("mousemove.cfSlidePanel touchmove.cfSlidePanel",{options:e},k)});c.bind("mouseup.cfSlidePanel touchend.cfSlidePanel",function(c){if(f.is(":animated")){return}if(Math.abs(i-h)<e.touchMoveLength){f.css("marginLeft",g)}else if(i>h){b.go("prev",b.container,b.marginType,b.itemSize,b.itemLength,b.options,g)}else{b.go("next",b.container,b.marginType,b.itemSize,b.itemLength,b.options,g)}a(this).unbind("mousemove.cfSlidePanel touchmove.cfSlidePanel",k)})});a(b).bind("orientationchange",function(){setTimeout(function(){var b=c.find(".panel"),f=b.length,j=c.width();a("div.cf-slide-panel-container").css({width:j});a("li.cf-slide-panel-item").css({width:j});c.data("plugin_cfSlider","");c.cfSlider({speed:e.speed,container:".cf-slide-panel-ul",item:".cf-slide-panel-item",prevEventType:"cf-slide-panel-prev",nextEventType:"cf-slide-panel-next",prevBtn:e.prevBtn,nextBtn:e.nextBtn,callback:function(b){sessionStorage.cfSlidePanelCurrentIndex=a(b).data("index");if(typeof e.getIndex==="function"){e.getIndex(a(b).data("index"))}}}).each(function(){if(sessionStorage.cfSlidePanelCurrentIndex!=d){a(".cf-slide-panel-ul").css({marginLeft:-(j*(parseInt(sessionStorage.cfSlidePanelCurrentIndex)+1))+"px"})}var b=c.data("plugin_cfSlider"),f=c.find(".cf-slide-panel-ul");c.unbind(".cfSlidePanel");c.bind("mousedown.cfSlidePanel touchstart.cfSlidePanel",function(a){if(!e.verticalScroll){a.preventDefault()}if(f.is(":animated")){return}g=parseInt(f.css("marginLeft"));h=i=a.originalEvent&&a.originalEvent.touches?a.originalEvent.touches[0].pageX:a.pageX;c.bind("mousemove.cfSlidePanel touchmove.cfSlidePanel",{options:e},k)});c.bind("mouseup.cfSlidePanel touchend.cfSlidePanel",function(c){if(f.is(":animated")){return}if(Math.abs(i-h)<e.touchMoveLength){f.css("marginLeft",g)}else if(i>h){b.go("prev",b.container,b.marginType,b.itemSize,b.itemLength,b.options,g)}else{b.go("next",b.container,b.marginType,b.itemSize,b.itemLength,b.options,g)}a(this).unbind("mousemove.cfSlidePanel touchmove.cfSlidePanel",k)})})},100)})};a.fn[e]=function(b){return this.each(function(){if(!a.data(this,"plugin_"+e)){a.data(this,"plugin_"+e,new j(this,b))}})}})(jQuery,window,document)